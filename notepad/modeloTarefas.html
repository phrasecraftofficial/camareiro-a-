<!DOCTYPE html>
<html lang="pt-br" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduApp - Navegação Dinâmica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: #f8fafc; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .card { background-color: #1e293b; border: 1px solid #334155; }
        .btn-topic { background-color: #1e293b; border: 1px solid #334155; transition: 0.2s; }
        .btn-topic:hover { border-color: #38bdf8; background-color: #0f172a; }
        .correct { background-color: #166534 !important; border-color: #22c55e !important; pointer-events: none; }
        .wrong { background-color: #7f1d1d !important; border-color: #ef4444 !important; }
        .hidden-view { display: none; }
    </style>
</head>
<body class="p-4 flex flex-col items-center">

    <div id="view-home" class="w-full max-w-md space-y-8 animate-in fade-in duration-500">
        <header class="py-6">
            <h1 class="text-3xl font-black text-white">Meu Curso</h1>
            <p class="text-slate-400">Continue de onde parou</p>
        </header>
        <div id="stages-list" class="space-y-6">
            </div>
    </div>

    <div id="view-tasks" class="w-full max-w-md hidden-view animate-in slide-in-from-right duration-300">
        <header class="flex items-center gap-4 py-6">
            <button onclick="showHome()" class="p-2 bg-slate-800 rounded-full text-sky-400">←</button>
            <h2 id="current-topic-name" class="text-xl font-bold">Tarefa</h2>
        </header>
        <div id="tasks-container" class="space-y-6 pb-20">
            </div>
    </div>

    <script>
        // BASE DE DADOS COMPLETA
        const courseData =  [
            {
                id: "stg_1",
                nome: "Estágio 1: Design Visual",
                topicos: [
                    {
                        id: "stg_1_top_1",
                        titulo: "Cores e Contraste",
                        concluido: false,
                        tarefas: [
                            {
                                id: "t1",
                                tipo: "quiz",
                                pergunta: "O que significa a sigla UX?",
                                opcoes: [
                                    { texto: "User Experience", correta: true },
                                    { texto: "User Example", correta: false }
                                ],
                                explicacao: "UX é Experiência do Usuário."
                            },
                            {
                                id: "t2",
                                tipo: "fill_the_blank",
                                pergunta: "O contraste alto facilita a ________ de textos.",
                                opcoes: ["Leitura", "Escrita", "Impressão"],
                                resposta_correta: "Leitura"
                            },
                            {
                                id: "t3",
                                tipo: "connect_pairs",
                                titulo: "Associe os contrastes",
                                pares: [
                                    { chave: "Preto/Branco", valor: "Máximo" },
                                    { chave: "Cinza/Cinza", valor: "Baixo" }
                                ]
                            }
                        ]
                    },
                    { id: "stg_1_top_2", titulo: "Tipografia Básica", concluido: false, tarefas: [] }
                ]
            },
            {
                id: "stg_2",
                nome: "Estágio 2: Arquitetura",
                topicos: [
                    { id: "stg_2_top_1", titulo: "Sitemaps", concluido: false, tarefas: [] },
                    { id: "stg_2_top_2", titulo: "User Flow", concluido: false, tarefas: [] }
                ]
            }
        ];

        const homeView = document.getElementById('view-home');
        const tasksView = document.getElementById('view-tasks');
        const stagesList = document.getElementById('stages-list');
        const tasksContainer = document.getElementById('tasks-container');

        // RENDERIZA A HOME
        function renderHome() {
            stagesList.innerHTML = '';
            courseData.forEach(stage => {
                const stageEl = document.createElement('div');
                stageEl.innerHTML = `
                    <h3 class="text-xs font-bold text-sky-500 uppercase tracking-widest mb-3">${stage.nome}</h3>
                    <div class="grid gap-3">
                        ${stage.topicos.map(topico => `
                            <button onclick="openTopic('${stage.id}', '${topico.id}')" class="btn-topic w-full p-5 rounded-2xl flex justify-between items-center text-left">
                                <span>${topico.nome}</span>
                                <span class="text-slate-500 text-sm">${topico.tarefas.length > 0 ? topico.tarefas.length + ' Atividades' : 'Breve'}</span>
                            </button>
                        `).join('')}
                    </div>
                `;
                stagesList.appendChild(stageEl);
            });
        }

        // ABRE O TÓPICO
        function openTopic(stageId, topicId) {
            const stage = courseData.find(s => s.id === stageId);
            const topic = stage.topicos.find(t => t.id === topicId);
            
            document.getElementById('current-topic-name').innerText = topic.nome;
            tasksContainer.innerHTML = topic.tarefas.length > 0 ? '' : '<p class="text-center text-slate-500 py-10">Nenhuma tarefa disponível ainda.</p>';
            
            topic.tarefas.forEach((tarefa, idx) => {
                if(tarefa.tipo === 'quiz') {
                    tasksContainer.innerHTML += `
                        <div class="card p-6 rounded-3xl">
                            <h4 class="mb-4 text-lg font-medium">${tarefa.pergunta}</h4>
                            <div class="space-y-2">
                                ${tarefa.opcoes.map(o => `<button onclick="this.classList.add('${o.correta ? 'correct' : 'wrong'}')" class="w-full p-4 btn-topic rounded-xl text-left">${o.texto}</button>`).join('')}
                            </div>
                        </div>`;
                }
                if(tarefa.tipo === 'fill_the_blank') {
                    tasksContainer.innerHTML += `
                        <div class="card p-6 rounded-3xl">
                            <h4 class="mb-4 text-lg italic">"${tarefa.pergunta.replace('________', `<span class='text-sky-400 font-bold'>...</span>`)}"</h4>
                            <div class="flex gap-2">
                                ${tarefa.opcoes.map(o => `<button onclick="alert('${o === tarefa.resposta_correta ? 'Acertou!' : 'Tente de novo'}')" class="px-4 py-2 bg-slate-700 rounded-lg">${o}</button>`).join('')}
                            </div>
                        </div>`;
                }
            });

            homeView.classList.add('hidden-view');
            tasksView.classList.remove('hidden-view');
        }

        function showHome() {
            tasksView.classList.add('hidden-view');
            homeView.classList.remove('hidden-view');
        }

        renderHome();
    </script>
</body>
</html>
